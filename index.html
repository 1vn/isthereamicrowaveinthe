<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Does the CSSU have a microwave?</title>
  <style>
    #yes {
      font-size: 6em;
      font-weight: 700;
      margin: 0;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
    }
    #since{
      margin: 0 auto;
      text-align: center;
      font-size: 0.15em;
    }
  </style>
</head>
<body>
  <div id="yes">
    YES.
    <div id="since"></div>
  </div>
  <script>
    //TODO: update this on commit automatically
    var LAST_UPDATE = "Thu Jan 05 2017 10:00:54 GMT-0500 (EST)";

    function getTimeSince(starttime){
      let t = Date.parse(new Date()) - Date.parse(starttime);
      let seconds = Math.floor( (t/1000) % 60 );
      let minutes = Math.floor( (t/1000/60) % 60 );
      let hours = Math.floor( (t/(1000*60*60)) % 24 );
      let days = Math.floor( t/(1000*60*60*24) );
      return {
        'total': t,
        'days': days,
        'hours': hours,
        'minutes': minutes,
        'seconds': seconds
      };
    }

    function updateTimer(){
      var time = getTimeSince(LAST_UPDATE);
      var sinceEl = document.getElementById("since");
      
      var countdownStr = "(updated ";

      var days = time.days;
      if(days > 0){
        var desc = "days";
        if(days == 1){
          desc = "day";
        }
        countdownStr += days + " "+desc+", ";
      }

      var hours = time.hours ;
      if(hours > 0){
        var desc = "hours";
        if(hours == 1){
          desc = "hour";
        }
        countdownStr += hours + " "+desc+", ";
      }

      var minutes = time.minutes;
      if(minutes > 0){
        var desc = "minutes";
        if(hours == 1){
          desc = "minute";
        }
        countdownStr += minutes + " "+desc+" and ";
      }

      var seconds = time.seconds;
      if(seconds > 0){
        var desc = "seconds";
        if(hours == 1){
          desc = "second";
        }
        countdownStr += seconds + " "+desc+" ";
      }
     
      countdownStr += "ago)";
      
      sinceEl.innerHTML = countdownStr;
    }


    //smaller interval than 1s since people may open browser in between seconds
    setInterval(updateTimer, 100)
  </script>
</body>
</html>
